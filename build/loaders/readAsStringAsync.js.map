{"version":3,"file":"readAsStringAsync.js","sourceRoot":"","sources":["../../src/loaders/readAsStringAsync.ts"],"names":[],"mappings":"AAAA,OAAO,EAAE,iBAAiB,EAAE,MAAM,kBAAkB,CAAC;AACrD,OAAO,EAAE,QAAQ,EAAE,MAAM,cAAc,CAAC;AAExC,OAAO,KAAK,MAAM,UAAU,CAAC;AAI7B,MAAM,CAAC,OAAO,CAAC,KAAK,UAAU,+BAA+B,CAC3D,QAAgB;IAEhB,IAAI,MAAM,CAAC,wBAAwB,EAAE,CAAC;QACpC,OAAO,CAAC,IAAI,CAAC,WAAW,CAAC,CAAC;IAC5B,CAAC;IAED,IAAI,QAAQ,CAAC,EAAE,KAAK,KAAK,EAAE,CAAC;QAC1B,MAAM,MAAM,GAAG,IAAI,KAAK,CAAC,UAAU,EAAE,CAAC;QACtC,OAAO,IAAI,OAAO,CAAC,CAAC,OAAO,EAAE,MAAM,EAAE,EAAE,CACrC,MAAM,CAAC,IAAI,CACT,QAAQ,EACR,KAAK,EAAE,KAAK,EAAE,EAAE;YACd,aAAa;YACb,OAAO,CAAC,MAAM,KAAK,CAAC,CAAC;QACvB,CAAC,EACD,GAAG,EAAE,GAAE,CAAC,EACR,MAAM,CACP,CACF,CAAC;IACJ,CAAC;IACD,IAAI,CAAC;QACH,OAAO,MAAM,iBAAiB,CAAC,QAAQ,CAAC,CAAC;IAC3C,CAAC;IAAC,OAAO,EAAE,OAAO,EAAE,EAAE,CAAC;QACrB,MAAM,IAAI,KAAK,CACb,2CAA2C,QAAQ,KAAK,OAAO,EAAE,CAClE,CAAC;IACJ,CAAC;YAAS,CAAC;QACT,IAAI,MAAM,CAAC,wBAAwB,EAAE,CAAC;YACpC,OAAO,CAAC,OAAO,CAAC,WAAW,CAAC,CAAC;QAC/B,CAAC;IACH,CAAC;AACH,CAAC","sourcesContent":["import { readAsStringAsync } from 'expo-file-system';\r\nimport { Platform } from 'react-native';\r\n\r\nimport THREE from '../Three';\r\n\r\ndeclare let global: any;\r\n\r\nexport default async function readFromFileSystemAsStringAsync(\r\n  localUri: string\r\n): Promise<string | null> {\r\n  if (global.__expo_three_log_loading) {\r\n    console.time('loadAsset');\r\n  }\r\n\r\n  if (Platform.OS === 'web') {\r\n    const loader = new THREE.FileLoader();\r\n    return new Promise((resolve, reject) =>\r\n      loader.load(\r\n        localUri,\r\n        async (value) => {\r\n          // @ts-ignore\r\n          resolve(await value);\r\n        },\r\n        () => {},\r\n        reject\r\n      )\r\n    );\r\n  }\r\n  try {\r\n    return await readAsStringAsync(localUri);\r\n  } catch ({ message }) {\r\n    throw new Error(\r\n      `ExpoTHREE: FileSystem.readAsStringAsync(${localUri}) ${message}`\r\n    );\r\n  } finally {\r\n    if (global.__expo_three_log_loading) {\r\n      console.timeEnd('loadAsset');\r\n    }\r\n  }\r\n}\r\n"]}